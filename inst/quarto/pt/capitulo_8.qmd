---
params:
  ano: ""
  duckdb_path: ""
---

```{r}
con <- duckdb::dbConnect(duckdb::duckdb(), params$duckdb_path)
ano <- params$ano
```

# Dados Energéticos Estaduais

![](../img/capas/imagem_cap_8.png)

## Produção de Energia - Fósseis 

```{r}
benCorrido::tab_producao_energia_fosseis_1(con, lab1 = "Região", lab2 = "UF")
benCorrido::gerar_botoes_download(tab_name = "tab_producao_energia_fosseis_1")
```

```{r}
benCorrido::tab_producao_energia_fosseis_2(con, lab1 = "Região")
benCorrido::gerar_botoes_download(tab_name = "tab_producao_energia_fosseis_2")
```

## Produção de Energia – Eletricidade e Álcool  

```{r}
benCorrido::tab_producao_energia_eletricidade_alcool_1(con, lab1 = "Região", lab2 = "UF")
benCorrido::gerar_botoes_download(tab_name = "tab_producao_energia_eletricidade_alcool_1")
```

```{r}
benCorrido::tab_producao_energia_eletricidade_alcool_2(con, lab1 = "Região")
benCorrido::gerar_botoes_download(tab_name = "tab_producao_energia_eletricidade_alcool_2")
```

## Geração de Eletricidade por Fonte  


```{r}
anos <- 2023:2011

botao_tabela <- htmltools::tags$a(
  href = glue::glue("dados/tabela_geracao_eletricidade_por_fonte.xlsx"),
  htmltools::tags$button(
    class = "btn btn-default",
    bsicons::bs_icon("download"),
    "Tabela"
  )
)


tabelas <- purrr::map(
  anos,
  \(ano) {
    htmltools::div(
      benCorrido::tab_geracao_eletricidade_por_fonte(con, .ano = ano, lab1 = "Região", lab2 = "UF", .coluna_total = "Geração total"),
      benCorrido::gerar_botoes_download(
        tab_name = glue::glue("tab_geracao_eletricidade_por_fonte_{ano}"),
        tabela = FALSE,
        botao_tabela
      )
    )
  }
)

benCorrido::create_dropdown(
  elementos = tabelas,
  params = anos,
  id = "tab_geracao_eletricidade_por_fonte",
  label = "Ano:",
  dropdown_width = "200px",
  html = TRUE
)
```

## Consumo Residencial de Eletricidade  

::: {.panel-tabset}

## Valor absoluto

```{r}
benCorrido::tab_consumo_residencial_eletricidade(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto")
benCorrido::gerar_botoes_download(tab_name = "tab_consumo_residencial_eletricidade", .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_consumo_residencial_eletricidade(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual")
benCorrido::gerar_botoes_download(tab_name = "tab_consumo_residencial_eletricidade", .tipo_dado = "Percentual")
```

:::

## Consumo Residencial de Gás Liquefeito de Petróleo

::: {.panel-tabset}

## Valor absoluto

```{r}
benCorrido::tab_consumo_residencial_gas_liquefeito_petroleo(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto")
benCorrido::gerar_botoes_download(tab_name = "tab_consumo_residencial_gas_liquefeito_petroleo", .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_consumo_residencial_gas_liquefeito_petroleo(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual")
benCorrido::gerar_botoes_download(tab_name = "tab_consumo_residencial_gas_liquefeito_petroleo", .tipo_dado = "Percentual")
```

:::

## Capacidade Instalada de Geração de Energia  

::: {.panel-tabset}

## Valor absoluto

```{r}
benCorrido::tab_capacidade_instalada_geracao_energia(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_geracao_energia", .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_geracao_energia(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_geracao_energia", .tipo_dado = "Percentual")
```

:::


## Capacidade Instalada de Mini e Micro Geração Distribuída 

```{r}
benCorrido::tab_capacidade_instalada_mini_micro_geracao_distribuida_1(con, lab1 = "Região", lab2 = "UF")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_mini_micro_geracao_distribuida_1")
```

```{r}
benCorrido::tab_capacidade_instalada_mini_micro_geracao_distribuida_2(con, lab1 = "Região")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_mini_micro_geracao_distribuida_2")
```

## Capacidade Instalada em Autoprodutores por Setor Econômico  

### Agropecuário

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Agropecuário"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::

### Comercial

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Comercial"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::

### Público

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Público"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::

### Residencial

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Residencial"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::

### Setor Energético

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Setor Energético"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::

### Transporte

::: {.panel-tabset}

## Valor absoluto

```{r}
setor <- "Transporte"
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Absoluto")
```

## Valor percentual

```{r}
benCorrido::tab_capacidade_instalada_autoprodutores_setor_economico(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor)
benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_setor_economico_{setor}"), .tipo_dado = "Percentual")
```

:::


## Capacidade Instalada em Autoprodutores por Segmento Industrial  

::: {.panel-tabset}

## Valor absoluto

```{r}
setores <- c(
  "Açúcar e Álcool", "Alimentos e Bebidas", "Alumínio", "Cerâmica",
  "Cimento", "Ferro-Gusa e Aço", "Ferro-Ligas", "Mineração",
  "Não-Ferrosos", "Outros", "Papel e Celulose", "Química", "Têxtil"
)

tabelas <- purrr:::map(
  setores,
  \(setor) {
    htmltools::div(
      benCorrido::tab_capacidade_instalada_autoprodutores_segmento_industrial(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Absoluto", .setor = setor),
      benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_segmento_industrial_{setor}"), .tipo_dado = "Absoluto")
    )
  }
)

benCorrido::create_dropdown(
  elementos = tabelas,
  params = setores,
  id = "tab_capacidade_instalada_autoprodutores_segmento_industrial_absoluto",
  label = "Segmento Industrial:",
  dropdown_width = "300px",
  html = TRUE
)
```

## Valor percentual

```{r}
setores <- c(
  "Açúcar e Álcool", "Alimentos e Bebidas", "Alumínio", "Cerâmica",
  "Cimento", "Ferro-Gusa e Aço", "Ferro-Ligas", "Mineração",
  "Não-Ferrosos", "Outros", "Papel e Celulose", "Química", "Têxtil"
)

tabelas <- purrr:::map(
  setores,
  \(setor) {
    htmltools::div(
      benCorrido::tab_capacidade_instalada_autoprodutores_segmento_industrial(con, lab1 = "Região", lab2 = "UF", .tipo_dado = "Percentual", .setor = setor),
      benCorrido::gerar_botoes_download(tab_name = glue::glue("tab_capacidade_instalada_autoprodutores_segmento_industrial_{setor}"), .tipo_dado = "Percentual")
    )
  }
)

benCorrido::create_dropdown(
  elementos = tabelas,
  params = setores,
  id = "tab_capacidade_instalada_autoprodutores_segmento_industrial_percentual",
  label = "Segmento Industrial:",
  dropdown_width = "300px",
  html = TRUE
)
```

:::

## Capacidade Instalada

```{r}
benCorrido::tab_capacidade_instalada_1(con, lab1 = "Região", lab2 = "UF")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_1")
```

```{r}
benCorrido::tab_capacidade_instalada_2(con, lab1 = "Região")
benCorrido::gerar_botoes_download(tab_name = "tab_capacidade_instalada_2")
```

## Reservas Provadas e Potencial Hidráulico

```{r}
benCorrido::tab_reservas_provadas_potencial_hidraulico_1(con, lab1 = "")
benCorrido::gerar_botoes_download(tab_name = "tab_reservas_provadas_potencial_hidraulico_1")
```

```{r}
benCorrido::tab_reservas_provadas_potencial_hidraulico_2(con, lab1 = "Região")
benCorrido::gerar_botoes_download(tab_name = "tab_reservas_provadas_potencial_hidraulico_2")
```


```{r}
htmltools::tags$script(src = "../js/fix_slider.js")
```